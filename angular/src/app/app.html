<nz-layout
  (drop)="onDrop($event)"
  (dragover)="onDragOver($event)"
  (dragleave)="onDragLeave($event)"
  [class.drag-over]="isDragging()"
>
  <app-header
    [title]="title()"
    [(searchTerm)]="attachmentSearchText"
    (addAttachment)="showModal()"
  />
  <nz-content>
    <div class="site-layout-content">
      <nz-splitter>
        <nz-splitter-panel nzDefaultSize="50%" nzMin="10%" nzMax="90%">
          <app-attachments-list
            [attachments]="filteredAttachments"
            [selectedId]="selectedAttachment()?.id ?? null"
            (selectAttachment)="selectAttachment($event)"
          />
        </nz-splitter-panel>
        <nz-splitter-panel>
          <div class="layout-right">
            <app-attachment-details
              [attachment]="selectedAttachment()"
              [(isEditing)]="isEditingAttachmentDetails"
              (toggleEdit)="toggleEdit()"
              (deleteAttachment)="deleteAttachment(selectedAttachment()!)"
              (openFile)="openFile(selectedAttachment()!)"
            />
          </div>
        </nz-splitter-panel>
      </nz-splitter>
    </div>
  </nz-content>

  <div class="drop-overlay" *ngIf="isDragging()">
    <div class="drop-message">
      <span class="drop-icon">ðŸ“Ž</span>
      <span>Drop file to add attachment</span>
    </div>
  </div>
</nz-layout>

<app-add-attachment-modal
  [(visible)]="isAddAttachmentModelVisible"
  [(newAttachmentName)]="newAttachmentName"
  [(newAttachmentFileName)]="newAttachmentFileName"
  [droppedFile]="droppedFile()"
  (cancel)="handleCancel()"
  (submit)="handleSubmit($event)"
/>
